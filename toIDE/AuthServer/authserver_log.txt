2021-12-30 01:53:52.487 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2021-12-30 01:53:52.743 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-12-30 01:53:52.759 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-12-30 01:53:52.802 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-12-30 01:53:52.804 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-12-30 01:53:52.806 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-12-30 01:53:52.808 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-12-30 01:53:53.233 +03:00 [DBG] Starting grant removal
2021-12-30 01:53:53.352 +03:00 [DBG] Login Url: /Account/Login
2021-12-30 01:53:53.355 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-12-30 01:53:53.357 +03:00 [DBG] Logout Url: /Account/Logout
2021-12-30 01:53:53.358 +03:00 [DBG] ConsentUrl Url: /consent
2021-12-30 01:53:53.360 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-12-30 01:53:53.362 +03:00 [DBG] Error Url: /home/error
2021-12-30 01:53:53.363 +03:00 [DBG] Error Id Parameter: errorId
2021-12-30 01:54:25.411 +03:00 [INF] Removing 0 grants
2021-12-30 01:54:44.450 +03:00 [DBG] Stopping grant removal
2021-12-30 01:54:44.455 +03:00 [DBG] TaskCanceledException. Exiting.
2021-12-30 01:55:33.121 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2021-12-30 01:55:33.414 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-12-30 01:55:33.415 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-12-30 01:55:33.416 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-12-30 01:55:33.417 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-12-30 01:55:33.419 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-12-30 01:55:33.420 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-12-30 01:55:33.592 +03:00 [DBG] Starting grant removal
2021-12-30 01:55:33.683 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 01:55:33.689 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 01:55:33.691 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 01:55:33.704 +03:00 [DBG] Login Url: /Account/Login
2021-12-30 01:55:33.706 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-12-30 01:55:33.708 +03:00 [DBG] Logout Url: /Account/Logout
2021-12-30 01:55:33.709 +03:00 [DBG] ConsentUrl Url: /consent
2021-12-30 01:55:33.711 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-12-30 01:55:33.712 +03:00 [DBG] Error Url: /home/error
2021-12-30 01:55:33.714 +03:00 [DBG] Error Id Parameter: errorId
2021-12-30 01:55:33.732 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 01:55:33.747 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 01:55:33.749 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 01:55:33.751 +03:00 [DBG] Start discovery request
2021-12-30 01:55:33.909 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-12-30 01:55:33.952 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-12-30 01:55:33.954 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-12-30 01:55:33.957 +03:00 [DBG] Start authorize request
2021-12-30 01:55:33.966 +03:00 [DBG] No user present in authorize request
2021-12-30 01:55:33.969 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 01:55:33.981 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 01:55:34.013 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 01:55:34.043 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"6036f387264846aa970655c23847c323","UiLocales":null,"Nonce":"02df7e0e9a6b4c4586af2fa6600bc653","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"6036f387264846aa970655c23847c323","nonce":"02df7e0e9a6b4c4586af2fa6600bc653"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 01:55:34.050 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 01:55:34.323 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 01:55:34.325 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 01:55:34.327 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 01:55:34.330 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 01:56:04.984 +03:00 [INF] Removing 0 grants
2021-12-30 01:56:35.092 +03:00 [INF] Removing 0 grants
2021-12-30 01:57:05.139 +03:00 [INF] Removing 0 grants
2021-12-30 01:57:35.169 +03:00 [INF] Removing 0 grants
2021-12-30 01:58:05.223 +03:00 [INF] Removing 0 grants
2021-12-30 01:58:35.263 +03:00 [INF] Removing 0 grants
2021-12-30 01:59:05.317 +03:00 [INF] Removing 0 grants
2021-12-30 01:59:35.348 +03:00 [INF] Removing 0 grants
2021-12-30 02:00:05.379 +03:00 [INF] Removing 0 grants
2021-12-30 02:00:35.450 +03:00 [INF] Removing 0 grants
2021-12-30 02:01:05.480 +03:00 [INF] Removing 0 grants
2021-12-30 02:01:35.507 +03:00 [INF] Removing 0 grants
2021-12-30 02:01:54.751 +03:00 [DBG] CORS request made for path: /api/account from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-12-30 02:01:55.348 +03:00 [WRN] User 1d8a30e6-2211-40ce-851b-2d5a721d4a0b validation failed: DuplicateUserName.
2021-12-30 02:02:00.782 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 02:02:00.784 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:02:00.786 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:02:00.789 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 02:02:00.793 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 02:02:00.795 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 02:02:00.798 +03:00 [DBG] Start discovery request
2021-12-30 02:02:00.835 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-12-30 02:02:00.837 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-12-30 02:02:00.848 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-12-30 02:02:00.851 +03:00 [DBG] Start authorize request
2021-12-30 02:02:00.856 +03:00 [DBG] No user present in authorize request
2021-12-30 02:02:00.858 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:02:00.861 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:00.863 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:02:00.865 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"67b86ed02f104631baf7aaf77645e0d5","UiLocales":null,"Nonce":"b6e27c0ec21f4a18b28a5072d9ac6bc3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"67b86ed02f104631baf7aaf77645e0d5","nonce":"b6e27c0ec21f4a18b28a5072d9ac6bc3"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:02:00.866 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:02:00.907 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:02:00.908 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:00.910 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:02:00.911 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:05.543 +03:00 [INF] Removing 0 grants
2021-12-30 02:02:07.593 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:02:07.595 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:07.597 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:02:07.650 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:02:07.651 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:07.654 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:02:07.655 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:16.313 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:02:16.315 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:16.317 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:02:16.318 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:35.584 +03:00 [INF] Removing 0 grants
2021-12-30 02:02:38.536 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 02:02:38.538 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:02:38.539 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:02:38.542 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 02:02:38.545 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 02:02:38.547 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 02:02:38.548 +03:00 [DBG] Start discovery request
2021-12-30 02:02:38.565 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-12-30 02:02:38.570 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-12-30 02:02:38.572 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-12-30 02:02:38.574 +03:00 [DBG] Start authorize request
2021-12-30 02:02:38.575 +03:00 [DBG] No user present in authorize request
2021-12-30 02:02:38.577 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:02:38.579 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:38.581 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:02:38.583 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"5b2a6239d1f44bd2aaf4794430202301","UiLocales":null,"Nonce":"c9bbb2a131f64554b58cac8ae992799e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"5b2a6239d1f44bd2aaf4794430202301","nonce":"c9bbb2a131f64554b58cac8ae992799e"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:02:38.585 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:02:38.621 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:02:38.622 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:38.624 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:02:38.625 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:51.052 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:02:51.054 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:51.056 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:02:51.100 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:02:51.102 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:51.104 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:02:51.106 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:54.139 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:02:54.140 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:02:54.143 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:02:54.145 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:03:05.610 +03:00 [INF] Removing 0 grants
2021-12-30 02:03:07.302 +03:00 [DBG] CORS request made for path: /api/account from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-12-30 02:03:12.323 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 02:03:12.327 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:03:12.330 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:03:12.335 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 02:03:12.337 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 02:03:12.339 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 02:03:12.341 +03:00 [DBG] Start discovery request
2021-12-30 02:03:12.365 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-12-30 02:03:12.368 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-12-30 02:03:12.369 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-12-30 02:03:12.371 +03:00 [DBG] Start authorize request
2021-12-30 02:03:12.376 +03:00 [DBG] No user present in authorize request
2021-12-30 02:03:12.379 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:03:12.380 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:03:12.382 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:03:12.385 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"338ca3b1581e48499814fa9834d3cf7a","UiLocales":null,"Nonce":"42fd6a8b17c84276985c5601d7b6de17","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"338ca3b1581e48499814fa9834d3cf7a","nonce":"42fd6a8b17c84276985c5601d7b6de17"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:03:12.386 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:03:12.417 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:03:12.418 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:03:12.420 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:03:12.422 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:03:19.648 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:03:19.650 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:03:19.653 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:03:19.702 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:03:19.704 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:03:19.706 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:03:19.707 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:03:35.652 +03:00 [INF] Removing 0 grants
2021-12-30 02:04:05.680 +03:00 [INF] Removing 0 grants
2021-12-30 02:04:06.037 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:06.040 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:06.045 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:06.108 +03:00 [DBG] Augmenting SignInContext
2021-12-30 02:04:06.110 +03:00 [DBG] Adding idp claim with value: local
2021-12-30 02:04:06.111 +03:00 [DBG] Adding amr claim with value: pwd
2021-12-30 02:04:06.121 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:06.133 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-12-30 02:04:06.135 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-12-30 02:04:06.136 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-12-30 02:04:06.139 +03:00 [DBG] Start authorize callback request
2021-12-30 02:04:06.143 +03:00 [DBG] No user present in authorize request
2021-12-30 02:04:06.145 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:06.146 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:06.147 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:06.149 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"338ca3b1581e48499814fa9834d3cf7a","UiLocales":null,"Nonce":"42fd6a8b17c84276985c5601d7b6de17","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"338ca3b1581e48499814fa9834d3cf7a","nonce":"42fd6a8b17c84276985c5601d7b6de17"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:04:06.150 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:04:06.176 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:06.178 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:06.179 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:06.180 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:11.449 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:11.451 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:11.452 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:11.454 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:11.456 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:11.458 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:11.460 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:20.136 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:20.138 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:20.140 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:20.190 +03:00 [DBG] Augmenting SignInContext
2021-12-30 02:04:20.193 +03:00 [DBG] Adding idp claim with value: local
2021-12-30 02:04:20.195 +03:00 [DBG] Adding amr claim with value: pwd
2021-12-30 02:04:20.200 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:20.215 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-12-30 02:04:20.218 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-12-30 02:04:20.220 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-12-30 02:04:20.221 +03:00 [DBG] Start authorize callback request
2021-12-30 02:04:20.223 +03:00 [DBG] No user present in authorize request
2021-12-30 02:04:20.225 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:20.227 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:20.229 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:20.231 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"338ca3b1581e48499814fa9834d3cf7a","UiLocales":null,"Nonce":"42fd6a8b17c84276985c5601d7b6de17","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"338ca3b1581e48499814fa9834d3cf7a","nonce":"42fd6a8b17c84276985c5601d7b6de17"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:04:20.233 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:04:20.269 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:20.271 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:20.273 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:20.275 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:23.017 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:23.019 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:23.021 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:23.023 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:24.388 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:24.390 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:24.393 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:24.395 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:29.518 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 02:04:29.520 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:04:29.521 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:04:29.523 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 02:04:29.524 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 02:04:29.526 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 02:04:29.528 +03:00 [DBG] Start discovery request
2021-12-30 02:04:29.543 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-12-30 02:04:29.546 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-12-30 02:04:29.547 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-12-30 02:04:29.548 +03:00 [DBG] Start authorize request
2021-12-30 02:04:29.550 +03:00 [DBG] No user present in authorize request
2021-12-30 02:04:29.551 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:29.553 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:29.554 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:29.556 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"b236c7cd046540e3bb8fe44159c767af","UiLocales":null,"Nonce":"a305f0cc78774d41822b34f45b8ae4be","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"b236c7cd046540e3bb8fe44159c767af","nonce":"a305f0cc78774d41822b34f45b8ae4be"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:04:29.557 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:04:29.596 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:04:29.599 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:29.601 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:04:29.604 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:04:35.712 +03:00 [INF] Removing 0 grants
2021-12-30 02:05:05.740 +03:00 [INF] Removing 0 grants
2021-12-30 02:05:23.641 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 02:05:23.644 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:05:23.646 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:05:23.648 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 02:05:23.650 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 02:05:23.654 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 02:05:23.656 +03:00 [DBG] Start discovery request
2021-12-30 02:05:23.684 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-12-30 02:05:23.687 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-12-30 02:05:23.689 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-12-30 02:05:23.691 +03:00 [DBG] Start authorize request
2021-12-30 02:05:23.693 +03:00 [DBG] No user present in authorize request
2021-12-30 02:05:23.695 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:05:23.698 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:05:23.701 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:05:23.705 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"24d7edf798c444bc9dac272c27eb10f9","UiLocales":null,"Nonce":"62644d54d5ce4cec895bb67f373ff9c1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"24d7edf798c444bc9dac272c27eb10f9","nonce":"62644d54d5ce4cec895bb67f373ff9c1"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:05:23.707 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:05:23.743 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:05:23.745 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:05:23.746 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:05:23.748 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:05:29.479 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:05:29.481 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:05:29.483 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:05:29.538 +03:00 [DBG] Augmenting SignInContext
2021-12-30 02:05:29.539 +03:00 [DBG] Adding idp claim with value: local
2021-12-30 02:05:29.540 +03:00 [DBG] Adding amr claim with value: pwd
2021-12-30 02:05:29.545 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:05:29.580 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-12-30 02:05:29.608 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-12-30 02:05:29.610 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-12-30 02:05:29.612 +03:00 [DBG] Start authorize callback request
2021-12-30 02:05:29.614 +03:00 [DBG] No user present in authorize request
2021-12-30 02:05:29.615 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:05:29.617 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:05:29.618 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:05:29.620 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"24d7edf798c444bc9dac272c27eb10f9","UiLocales":null,"Nonce":"62644d54d5ce4cec895bb67f373ff9c1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"24d7edf798c444bc9dac272c27eb10f9","nonce":"62644d54d5ce4cec895bb67f373ff9c1"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:05:29.621 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:05:29.661 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:05:29.664 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:05:29.666 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:05:29.667 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:05:35.771 +03:00 [INF] Removing 0 grants
2021-12-30 02:06:05.799 +03:00 [INF] Removing 0 grants
2021-12-30 02:06:35.839 +03:00 [INF] Removing 0 grants
2021-12-30 02:07:05.872 +03:00 [INF] Removing 0 grants
2021-12-30 02:07:35.934 +03:00 [INF] Removing 0 grants
2021-12-30 02:07:41.051 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:07:41.053 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:07:41.055 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:07:41.057 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:08:05.972 +03:00 [INF] Removing 0 grants
2021-12-30 02:08:35.995 +03:00 [INF] Removing 0 grants
2021-12-30 02:09:06.020 +03:00 [INF] Removing 0 grants
2021-12-30 02:09:18.195 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 02:09:18.197 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:09:18.199 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:09:18.202 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 02:09:18.204 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 02:09:18.205 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 02:09:18.207 +03:00 [DBG] Start discovery request
2021-12-30 02:09:18.239 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-12-30 02:09:18.243 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-12-30 02:09:18.244 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-12-30 02:09:18.246 +03:00 [DBG] Start authorize request
2021-12-30 02:09:18.247 +03:00 [DBG] No user present in authorize request
2021-12-30 02:09:18.248 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:18.249 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:18.251 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:18.253 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"03fb94634ff64fc293029c72db69d18b","UiLocales":null,"Nonce":"ac2030fffcf0412888498c642def32f4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"03fb94634ff64fc293029c72db69d18b","nonce":"ac2030fffcf0412888498c642def32f4"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:09:18.254 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:09:18.287 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:18.288 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:18.289 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:18.291 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:27.628 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:27.630 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:27.632 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:27.688 +03:00 [WRN] Invalid password for user 885f9702-8d21-4f33-89d0-48fa61505804.
2021-12-30 02:09:27.690 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:27.692 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:27.695 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:27.697 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:35.632 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:35.634 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:35.635 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:35.679 +03:00 [DBG] Augmenting SignInContext
2021-12-30 02:09:35.680 +03:00 [DBG] Adding idp claim with value: local
2021-12-30 02:09:35.682 +03:00 [DBG] Adding amr claim with value: pwd
2021-12-30 02:09:35.688 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:35.706 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-12-30 02:09:35.708 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-12-30 02:09:35.710 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-12-30 02:09:35.712 +03:00 [DBG] Start authorize callback request
2021-12-30 02:09:35.713 +03:00 [DBG] No user present in authorize request
2021-12-30 02:09:35.715 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:35.716 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:35.718 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:35.719 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"03fb94634ff64fc293029c72db69d18b","UiLocales":null,"Nonce":"ac2030fffcf0412888498c642def32f4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"03fb94634ff64fc293029c72db69d18b","nonce":"ac2030fffcf0412888498c642def32f4"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:09:35.721 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:09:35.748 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:35.750 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:35.751 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:35.752 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:36.050 +03:00 [INF] Removing 0 grants
2021-12-30 02:09:47.300 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 02:09:47.301 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:09:47.302 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:09:47.305 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 02:09:47.306 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 02:09:47.307 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 02:09:47.309 +03:00 [DBG] Start discovery request
2021-12-30 02:09:47.325 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-12-30 02:09:47.328 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-12-30 02:09:47.331 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-12-30 02:09:47.332 +03:00 [DBG] Start authorize request
2021-12-30 02:09:47.334 +03:00 [DBG] No user present in authorize request
2021-12-30 02:09:47.335 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:47.336 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:47.344 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:47.346 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"bd9a5bec9ca54308a8a93c56cd883d90","UiLocales":null,"Nonce":"2089cfb86ab8460a8fd6ecf29fb17cee","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"bd9a5bec9ca54308a8a93c56cd883d90","nonce":"2089cfb86ab8460a8fd6ecf29fb17cee"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:09:47.348 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:09:47.382 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:47.384 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:47.386 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:47.388 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:57.522 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:57.523 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:57.525 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:57.574 +03:00 [DBG] Augmenting SignInContext
2021-12-30 02:09:57.575 +03:00 [DBG] Adding idp claim with value: local
2021-12-30 02:09:57.578 +03:00 [DBG] Adding amr claim with value: pwd
2021-12-30 02:09:57.583 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:57.599 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-12-30 02:09:57.601 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-12-30 02:09:57.603 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-12-30 02:09:57.606 +03:00 [DBG] Start authorize callback request
2021-12-30 02:09:57.609 +03:00 [DBG] No user present in authorize request
2021-12-30 02:09:57.611 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:57.614 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:57.616 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:57.619 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"bd9a5bec9ca54308a8a93c56cd883d90","UiLocales":null,"Nonce":"2089cfb86ab8460a8fd6ecf29fb17cee","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"bd9a5bec9ca54308a8a93c56cd883d90","nonce":"2089cfb86ab8460a8fd6ecf29fb17cee"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:09:57.620 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:09:57.696 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:09:57.698 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:09:57.700 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:09:57.702 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:10:06.078 +03:00 [INF] Removing 0 grants
2021-12-30 02:10:36.140 +03:00 [INF] Removing 0 grants
2021-12-30 02:11:06.164 +03:00 [INF] Removing 0 grants
2021-12-30 02:11:36.189 +03:00 [INF] Removing 0 grants
2021-12-30 02:12:06.158 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:12:06.160 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:12:06.162 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:12:06.163 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:12:06.234 +03:00 [INF] Removing 0 grants
2021-12-30 02:12:17.678 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 02:12:17.679 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:12:17.681 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:12:17.683 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 02:12:17.685 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 02:12:17.686 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 02:12:17.687 +03:00 [DBG] Start discovery request
2021-12-30 02:12:17.701 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-12-30 02:12:17.703 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-12-30 02:12:17.704 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-12-30 02:12:17.706 +03:00 [DBG] Start authorize request
2021-12-30 02:12:17.708 +03:00 [DBG] No user present in authorize request
2021-12-30 02:12:17.710 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:12:17.713 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:12:17.715 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:12:17.718 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"e84894b4d23c45c698da7be532b1106a","UiLocales":null,"Nonce":"55deca5d8d6a48a78c81a419ba9b7796","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"e84894b4d23c45c698da7be532b1106a","nonce":"55deca5d8d6a48a78c81a419ba9b7796"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:12:17.719 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 02:12:17.761 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:12:17.763 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:12:17.764 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:12:17.766 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:12:31.039 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:12:31.041 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:12:31.046 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:12:31.116 +03:00 [DBG] Augmenting SignInContext
2021-12-30 02:12:31.118 +03:00 [DBG] Adding idp claim with value: local
2021-12-30 02:12:31.119 +03:00 [DBG] Adding amr claim with value: pwd
2021-12-30 02:12:31.122 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:12:31.144 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-12-30 02:12:31.146 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-12-30 02:12:31.148 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-12-30 02:12:31.150 +03:00 [DBG] Start authorize callback request
2021-12-30 02:12:31.152 +03:00 [DBG] User in authorize request: 885f9702-8d21-4f33-89d0-48fa61505804
2021-12-30 02:12:31.153 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 02:12:31.154 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:12:31.156 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 02:12:31.158 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"885f9702-8d21-4f33-89d0-48fa61505804","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"e84894b4d23c45c698da7be532b1106a","UiLocales":null,"Nonce":"55deca5d8d6a48a78c81a419ba9b7796","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"XGyu3hgeBPB_JNUTwJaj1A","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"e84894b4d23c45c698da7be532b1106a","nonce":"55deca5d8d6a48a78c81a419ba9b7796"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 02:12:31.286 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-12-30 02:12:31.291 +03:00 [DBG] Creating Implicit Flow response.
2021-12-30 02:12:31.301 +03:00 [DBG] Getting claims for access token for client: angular_spa
2021-12-30 02:12:31.303 +03:00 [DBG] Getting claims for access token for subject: 885f9702-8d21-4f33-89d0-48fa61505804
2021-12-30 02:12:31.692 +03:00 [DBG] Getting claims for identity token for subject: 885f9702-8d21-4f33-89d0-48fa61505804 and client: angular_spa
2021-12-30 02:12:31.696 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-12-30 02:12:31.711 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"885f9702-8d21-4f33-89d0-48fa61505804","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"e84894b4d23c45c698da7be532b1106a","Scope":"openid profile email api.read","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-12-30 02:12:31.719 +03:00 [DBG] Augmenting SignInContext
2021-12-30 02:12:32.334 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 02:12:32.336 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:12:32.338 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:12:32.343 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 02:12:32.348 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 02:12:32.350 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 02:12:32.353 +03:00 [DBG] Start discovery request
2021-12-30 02:12:32.372 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2021-12-30 02:12:32.374 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:12:32.376 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:12:32.381 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-12-30 02:12:32.384 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-12-30 02:12:32.386 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-12-30 02:12:32.389 +03:00 [DBG] Start key discovery request
2021-12-30 02:12:32.452 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2021-12-30 02:12:32.455 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 02:12:32.457 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 02:12:32.462 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-12-30 02:12:32.466 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-12-30 02:12:32.468 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-12-30 02:12:32.472 +03:00 [DBG] Start userinfo request
2021-12-30 02:12:32.477 +03:00 [DBG] Bearer token found in header
2021-12-30 02:12:32.529 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:12:32.532 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 02:12:32.570 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-12-30 02:12:32.578 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1640819551,"exp":1640823151,"iss":"http://localhost:5000","aud":"resourceapi","client_id":"angular_spa","sub":"885f9702-8d21-4f33-89d0-48fa61505804","auth_time":1640819551,"idp":"local","given_name":"kokoshaur","email":"kokoshaur-10@mail.ru","http://schemas.microsoft.com/ws/2008/06/identity/claims/role":"consumer","scope":["openid","profile","email","api.read"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-12-30 02:12:32.583 +03:00 [DBG] Creating userinfo response
2021-12-30 02:12:32.587 +03:00 [DBG] Scopes in access token: openid profile email api.read
2021-12-30 02:12:32.590 +03:00 [DBG] Scopes in access token: openid profile email api.read
2021-12-30 02:12:32.592 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
2021-12-30 02:12:32.595 +03:00 [DBG] Scopes in access token: openid profile email api.read
2021-12-30 02:12:32.702 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified given_name email http://schemas.microsoft.com/ws/2008/06/identity/claims/role
2021-12-30 02:12:32.705 +03:00 [DBG] End userinfo request
2021-12-30 02:12:32.733 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-12-30 02:12:32.739 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-12-30 02:12:32.745 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-12-30 02:12:32.749 +03:00 [DBG] Rendering check session result
2021-12-30 02:12:35.202 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 02:12:35.203 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 02:12:35.205 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 02:12:35.207 +03:00 [DBG] Start discovery request
2021-12-30 02:12:35.580 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-12-30 02:12:35.583 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-12-30 02:12:35.585 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-12-30 02:12:35.587 +03:00 [DBG] Start key discovery request
2021-12-30 02:12:36.255 +03:00 [INF] Removing 0 grants
2021-12-30 02:13:06.281 +03:00 [INF] Removing 0 grants
2021-12-30 03:32:52.122 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2021-12-30 03:32:52.397 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-12-30 03:32:52.398 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-12-30 03:32:52.399 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-12-30 03:32:52.401 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-12-30 03:32:52.402 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-12-30 03:32:52.403 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-12-30 03:32:52.625 +03:00 [DBG] Starting grant removal
2021-12-30 03:32:52.725 +03:00 [DBG] Login Url: /Account/Login
2021-12-30 03:32:52.728 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-12-30 03:32:52.730 +03:00 [DBG] Logout Url: /Account/Logout
2021-12-30 03:32:52.732 +03:00 [DBG] ConsentUrl Url: /consent
2021-12-30 03:32:52.733 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-12-30 03:32:52.734 +03:00 [DBG] Error Url: /home/error
2021-12-30 03:32:52.735 +03:00 [DBG] Error Id Parameter: errorId
2021-12-30 03:33:26.883 +03:00 [INF] Removing 0 grants
2021-12-30 03:33:57.066 +03:00 [INF] Removing 0 grants
2021-12-30 03:34:27.160 +03:00 [INF] Removing 0 grants
2021-12-30 03:34:41.110 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2021-12-30 03:34:41.702 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-12-30 03:34:41.705 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-12-30 03:34:41.708 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-12-30 03:34:41.710 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-12-30 03:34:41.714 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-12-30 03:34:41.717 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-12-30 03:34:41.954 +03:00 [DBG] Starting grant removal
2021-12-30 03:34:42.046 +03:00 [DBG] Login Url: /Account/Login
2021-12-30 03:34:42.049 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-12-30 03:34:42.050 +03:00 [DBG] Logout Url: /Account/Logout
2021-12-30 03:34:42.052 +03:00 [DBG] ConsentUrl Url: /consent
2021-12-30 03:34:42.053 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-12-30 03:34:42.054 +03:00 [DBG] Error Url: /home/error
2021-12-30 03:34:42.056 +03:00 [DBG] Error Id Parameter: errorId
2021-12-30 03:35:13.176 +03:00 [INF] Removing 0 grants
2021-12-30 03:35:43.270 +03:00 [INF] Removing 0 grants
2021-12-30 03:37:08.963 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2021-12-30 03:37:09.165 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-12-30 03:37:09.167 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-12-30 03:37:09.169 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-12-30 03:37:09.170 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-12-30 03:37:09.171 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-12-30 03:37:09.173 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-12-30 03:37:09.375 +03:00 [DBG] Starting grant removal
2021-12-30 03:37:09.468 +03:00 [DBG] Login Url: /Account/Login
2021-12-30 03:37:09.472 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-12-30 03:37:09.475 +03:00 [DBG] Logout Url: /Account/Logout
2021-12-30 03:37:09.477 +03:00 [DBG] ConsentUrl Url: /consent
2021-12-30 03:37:09.479 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2021-12-30 03:37:09.481 +03:00 [DBG] Error Url: /home/error
2021-12-30 03:37:09.483 +03:00 [DBG] Error Id Parameter: errorId
2021-12-30 03:37:25.197 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 03:37:25.217 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 03:37:25.218 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 03:37:25.222 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 03:37:25.244 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 03:37:25.246 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 03:37:25.251 +03:00 [DBG] Start discovery request
2021-12-30 03:37:25.420 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-12-30 03:37:25.452 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-12-30 03:37:25.454 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-12-30 03:37:25.458 +03:00 [DBG] Start authorize request
2021-12-30 03:37:25.467 +03:00 [DBG] No user present in authorize request
2021-12-30 03:37:25.471 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 03:37:25.486 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 03:37:25.519 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 03:37:25.556 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"87ec0a6540134aefacc55186db3cdec0","UiLocales":null,"Nonce":"ae4be701e0714a7798ac7efd63fc159a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"87ec0a6540134aefacc55186db3cdec0","nonce":"ae4be701e0714a7798ac7efd63fc159a"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 03:37:25.563 +03:00 [INF] Showing login: User is not authenticated
2021-12-30 03:37:25.677 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 03:37:25.678 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 03:37:25.680 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 03:37:25.683 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 03:37:40.596 +03:00 [INF] Removing 0 grants
2021-12-30 03:38:10.699 +03:00 [INF] Removing 0 grants
2021-12-30 03:38:40.738 +03:00 [INF] Removing 0 grants
2021-12-30 03:39:10.783 +03:00 [INF] Removing 0 grants
2021-12-30 03:39:40.828 +03:00 [INF] Removing 0 grants
2021-12-30 03:40:10.907 +03:00 [INF] Removing 0 grants
2021-12-30 03:40:40.928 +03:00 [INF] Removing 0 grants
2021-12-30 03:41:10.977 +03:00 [INF] Removing 0 grants
2021-12-30 03:41:36.515 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 03:41:36.517 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 03:41:36.521 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 03:41:37.045 +03:00 [DBG] Augmenting SignInContext
2021-12-30 03:41:37.047 +03:00 [DBG] Adding idp claim with value: local
2021-12-30 03:41:37.048 +03:00 [DBG] Adding amr claim with value: pwd
2021-12-30 03:41:37.059 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 03:41:37.086 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-12-30 03:41:37.088 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-12-30 03:41:37.090 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-12-30 03:41:37.094 +03:00 [DBG] Start authorize callback request
2021-12-30 03:41:37.100 +03:00 [DBG] User in authorize request: 885f9702-8d21-4f33-89d0-48fa61505804
2021-12-30 03:41:37.102 +03:00 [DBG] Start authorize request protocol validation
2021-12-30 03:41:37.103 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 03:41:37.105 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-12-30 03:41:37.108 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"885f9702-8d21-4f33-89d0-48fa61505804","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email api.read","State":"87ec0a6540134aefacc55186db3cdec0","UiLocales":null,"Nonce":"ae4be701e0714a7798ac7efd63fc159a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"pwtiXI2tTqLXEMUv0-VMww","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email api.read","state":"87ec0a6540134aefacc55186db3cdec0","nonce":"ae4be701e0714a7798ac7efd63fc159a"},"$type":"AuthorizeRequestValidationLog"}
2021-12-30 03:41:37.217 +03:00 [DBG] Client is configured to not require consent, no consent is required
2021-12-30 03:41:37.222 +03:00 [DBG] Creating Implicit Flow response.
2021-12-30 03:41:37.236 +03:00 [DBG] Getting claims for access token for client: angular_spa
2021-12-30 03:41:37.239 +03:00 [DBG] Getting claims for access token for subject: 885f9702-8d21-4f33-89d0-48fa61505804
2021-12-30 03:41:37.626 +03:00 [DBG] Getting claims for identity token for subject: 885f9702-8d21-4f33-89d0-48fa61505804 and client: angular_spa
2021-12-30 03:41:37.628 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-12-30 03:41:37.642 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"885f9702-8d21-4f33-89d0-48fa61505804","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"87ec0a6540134aefacc55186db3cdec0","Scope":"openid profile email api.read","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-12-30 03:41:37.651 +03:00 [DBG] Augmenting SignInContext
2021-12-30 03:41:38.660 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2021-12-30 03:41:38.665 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 03:41:38.669 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 03:41:38.674 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 03:41:38.678 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 03:41:38.680 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 03:41:38.682 +03:00 [DBG] Start discovery request
2021-12-30 03:41:38.723 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2021-12-30 03:41:38.724 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 03:41:38.726 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 03:41:38.729 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-12-30 03:41:38.733 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-12-30 03:41:38.734 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-12-30 03:41:38.737 +03:00 [DBG] Start key discovery request
2021-12-30 03:41:38.785 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2021-12-30 03:41:38.787 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2021-12-30 03:41:38.789 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2021-12-30 03:41:38.792 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-12-30 03:41:38.796 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-12-30 03:41:38.798 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-12-30 03:41:38.802 +03:00 [DBG] Start userinfo request
2021-12-30 03:41:38.805 +03:00 [DBG] Bearer token found in header
2021-12-30 03:41:38.861 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 03:41:38.867 +03:00 [DBG] client configuration validation for client angular_spa succeeded.
2021-12-30 03:41:38.914 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-12-30 03:41:38.930 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1640824897,"exp":1640828497,"iss":"https://localhost:44377","aud":"resourceapi","client_id":"angular_spa","sub":"885f9702-8d21-4f33-89d0-48fa61505804","auth_time":1640824897,"idp":"local","given_name":"kokoshaur","email":"kokoshaur-10@mail.ru","http://schemas.microsoft.com/ws/2008/06/identity/claims/role":"consumer","scope":["openid","profile","email","api.read"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-12-30 03:41:38.935 +03:00 [DBG] Creating userinfo response
2021-12-30 03:41:38.939 +03:00 [DBG] Scopes in access token: openid profile email api.read
2021-12-30 03:41:38.942 +03:00 [DBG] Scopes in access token: openid profile email api.read
2021-12-30 03:41:38.944 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
2021-12-30 03:41:38.947 +03:00 [DBG] Scopes in access token: openid profile email api.read
2021-12-30 03:41:39.056 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified given_name email http://schemas.microsoft.com/ws/2008/06/identity/claims/role
2021-12-30 03:41:39.058 +03:00 [DBG] End userinfo request
2021-12-30 03:41:39.079 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-12-30 03:41:39.082 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-12-30 03:41:39.084 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-12-30 03:41:39.087 +03:00 [DBG] Rendering check session result
2021-12-30 03:41:41.016 +03:00 [INF] Removing 0 grants
2021-12-30 03:42:11.052 +03:00 [INF] Removing 0 grants
2021-12-30 03:42:41.088 +03:00 [INF] Removing 0 grants
2021-12-30 03:43:11.130 +03:00 [INF] Removing 0 grants
2021-12-30 03:43:41.159 +03:00 [INF] Removing 0 grants
2021-12-30 03:44:11.190 +03:00 [INF] Removing 0 grants
2021-12-30 03:44:41.246 +03:00 [INF] Removing 0 grants
2021-12-30 03:45:11.282 +03:00 [INF] Removing 0 grants
2021-12-30 03:45:41.326 +03:00 [INF] Removing 0 grants
2021-12-30 03:46:11.363 +03:00 [INF] Removing 0 grants
2021-12-30 03:46:41.399 +03:00 [INF] Removing 0 grants
2021-12-30 03:47:11.419 +03:00 [INF] Removing 0 grants
2021-12-30 03:47:30.559 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-12-30 03:47:30.572 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-12-30 03:47:30.573 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-12-30 03:47:30.574 +03:00 [DBG] Start discovery request
2021-12-30 03:47:30.878 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-12-30 03:47:30.881 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-12-30 03:47:30.883 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-12-30 03:47:30.884 +03:00 [DBG] Start key discovery request
2021-12-30 03:47:41.451 +03:00 [INF] Removing 0 grants
